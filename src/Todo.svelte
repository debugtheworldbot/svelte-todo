<svelte:options immutable/>

<script>
	import { afterUpdate } from 'svelte';

	export let todo;
	// export let toggle;

	let div;
    const flash=(element)=> {
	requestAnimationFrame(() => {
		element.style.transition = 'none';
		element.style.color = 'rgba(255,62,0,1)';
		element.style.backgroundColor = 'rgba(255,62,0,0.2)';

		setTimeout(() => {
			element.style.transition = 'color 1s, background 1s';
			element.style.color = '';
			element.style.backgroundColor = '';
		});
	});
}
	afterUpdate(() => {
        console.log('update')
		flash(div);
	});
</script>

<style>
	div {
		cursor: pointer;
		line-height: 1.5;
	}
</style>

<!-- the text will flash red whenever
		the `todo` object changes -->
<div bind:this={div} on:click>
	{todo.done ? 'ğŸ‘': ''} {todo.text}
</div>
